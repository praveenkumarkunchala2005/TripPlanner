import { GoogleGenerativeAI } from "@google/generative-ai";
  
  const apiKey = import.meta.env.VITE_GEMINI_API_KEY;
  if (!apiKey) {
    console.error("‚ùå API Key is missing! Check your .env file.");
  }
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-1.5-flash",
    systemInstruction: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget, Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format.",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  

  export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget, Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format.\n"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "```json\n{\n  \"hotelOptions\": [\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": {\n        \"min\": 30,\n        \"max\": 80\n      },\n      \"hotelImageUrl\": \"https://www.circuscircus.com/wp-content/uploads/2023/06/CircusCircus_Exterior_Hero_Image_01.jpg\", \n      \"geoCoordinates\": {\n        \"latitude\": 36.1215,\n        \"longitude\": -115.1739\n      },\n      \"rating\": 3.5,\n      \"description\": \"A budget-friendly option with a lively atmosphere, known for its Adventuredome indoor theme park.\"\n    },\n    {\n      \"hotelName\": \"The D Las Vegas\",\n      \"hotelAddress\": \"300 Fremont St, Las Vegas, NV 89101\",\n      \"price\": {\n        \"min\": 40,\n        \"max\": 100\n      },\n      \"hotelImageUrl\": \"https://www.the-d.com/wp-content/uploads/2023/07/TheD-Exterior-hero-image.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1673,\n        \"longitude\": -115.1405\n      },\n      \"rating\": 4.0,\n      \"description\": \"Located in downtown Las Vegas, offering a retro vibe and a more affordable stay compared to the Strip.\"\n    },\n    {\n      \"hotelName\": \"Main Street Station Casino, Brewery & Hotel\",\n      \"hotelAddress\": \"200 S. Main Street, Las Vegas, NV 89101\",\n      \"price\": {\n        \"min\": 35,\n        \"max\": 90\n      },\n      \"hotelImageUrl\": \"https://www.mainstreetstationcasino.com/wp-content/uploads/2021/03/Main-Street-Station-Casino-Hotel-Exterior-Las-Vegas-Nevada.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1669,\n        \"longitude\": -115.1398\n      },\n      \"rating\": 3.8,\n      \"description\": \"Historic hotel in downtown Las Vegas, offering a blend of old-world charm and modern amenities at a reasonable price.\"\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"plan\": [\n        {\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"A pedestrian mall with a massive video canopy, street performers, and casinos.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/5/50/Fremont_Street_Experience_%28cropped%29.jpg/1280px-Fremont_Street_Experience_%28cropped%29.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1664,\n            \"longitude\": -115.1401\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.5,\n          \"timeTravel\": \"Evening (best for light show)\"\n        },\n        {\n          \"placeName\": \"Container Park\",\n          \"placeDetails\": \"An outdoor shopping and entertainment center made of shipping containers.\",\n          \"placeImageUrl\": \"https://media-cdn.tripadvisor.com/media/photo-s/1a/75/33/20/container-park.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1613,\n            \"longitude\": -115.1365\n          },\n          \"ticketPricing\": \"Free entry\",\n          \"rating\": 4.0,\n          \"timeTravel\": \"Afternoon\"\n        }\n      ]\n    },\n    \"day2\": {\n      \"plan\": [\n        {\n          \"placeName\": \"The Strip (walking tour)\",\n          \"placeDetails\": \"Walk the length of the Las Vegas Strip, admiring the famous hotels and casinos.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a5/Las_Vegas_Strip_at_Night_2017.jpg/1280px-Las_Vegas_Strip_at_Night_2017.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1146,\n            \"longitude\": -115.1729 \n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 5.0,\n          \"timeTravel\": \"Daytime or Evening\"\n        },\n        {\n          \"placeName\": \"Bellagio Conservatory & Botanical Gardens\",\n          \"placeDetails\": \"Free to enter, stunning seasonal displays.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c2/Bellagio_Conservatory_%26_Botanical_Gardens_2011.jpg/1280px-Bellagio_Conservatory_%26_Botanical_Gardens_2011.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1182,\n            \"longitude\": -115.1725\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.5,\n          \"timeTravel\": \"Anytime\"\n        }\n      ]\n    },\n    \"day3\": {\n      \"plan\": [\n        {\n          \"placeName\": \"Seven Magic Mountains\",\n          \"placeDetails\": \"Public art installation of colorful stacked boulders.  Requires transportation outside the Strip.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/0/01/Seven_Magic_Mountains_01.jpg/1280px-Seven_Magic_Mountains_01.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0677,\n            \"longitude\": -114.9577\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.2,\n          \"timeTravel\": \"Afternoon (good light for photos)\"\n        },\n        {\n          \"placeName\": \"Neon Museum\",\n          \"placeDetails\": \"A graveyard of vintage Las Vegas signs (consider a guided tour).\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6f/Neon_Museum_Boneyard_Las_Vegas.jpg/1280px-Neon_Museum_Boneyard_Las_Vegas.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1660,\n            \"longitude\": -115.1449\n          },\n          \"ticketPricing\": \"Moderate (check website for prices)\",\n          \"rating\": 4.5,\n          \"timeTravel\": \"Late afternoon\"\n        }\n      ]\n    }\n  }\n}\n```\n\n**Important Notes:**\n\n* **Prices are estimates:** Hotel and activity prices fluctuate greatly depending on the season and demand. Always check current pricing on booking websites and official sites.\n* **Transportation:**  Consider using ride-sharing services (Uber/Lyft) or the Las Vegas Monorail for transportation. Walking is feasible for many attractions on the Strip but can be tiring in the heat. For Seven Magic Mountains you'll need a car or taxi.\n* **Free Activities:** Las Vegas offers many free attractions and activities.  Take advantage of them to stay within your budget.\n* **Food:** Look for happy hour deals, buffets (if you're comfortable with them), and casual eateries to keep food costs down.\n* **Heat:** Las Vegas can be extremely hot, especially during summer months.  Plan your outdoor activities accordingly, and stay hydrated.\n\n\nThis JSON provides a framework.  Remember to research current prices and availability before your trip.  Have a fantastic, budget-friendly Las Vegas adventure!\n"},
          ],
        },
      ],
    });
  